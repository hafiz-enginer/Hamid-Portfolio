<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <title>Hamid Liaqat | AI/ML Engineer Portfolio</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description"
        content="Portfolio of Hamid Liaqat, AI/ML Engineer based in Lahore, Punjab, Pakistan. Machine Learning, Deep Learning, Computer Vision, NLP, Generative AI, RAG, AI Agents." />

  <!-- Tailwind CSS via CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          fontFamily: {
            sans: ['ui-sans-serif','system-ui','-apple-system','BlinkMacSystemFont','Segoe UI','sans-serif'],
          },
          boxShadow: {
            soft: '0 18px 55px -40px rgba(2,6,23,0.70)',
            glow: '0 0 0 1px rgba(148,163,184,0.12), 0 18px 70px -45px rgba(2,6,23,0.85)',
          }
        }
      }
    };
  </script>

  <style>
    :root{
      --ease-out:cubic-bezier(.16,1,.3,1);
      --ease-spring:cubic-bezier(.2,1.15,.2,1);

      /* Premium lab palette */
      --violet:#7c3aed;
      --cyan:#06b6d4;
      --emerald:#22c55e;
    }

    body { font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; }

    /* Reduced motion support */
    @media (prefers-reduced-motion: reduce) {
      * { animation-duration: 0.001ms !important; animation-iteration-count: 1 !important; transition-duration: 0.001ms !important; scroll-behavior: auto !important; }
      .motion-safe-only { display:none !important; }
    }

    /* Background layers */
    .lab-bg{
      position:fixed; inset:0; z-index:-5; pointer-events:none;
      background:
        radial-gradient(1200px 700px at 15% 10%, rgba(124,58,237,.22), transparent 60%),
        radial-gradient(900px 560px at 85% 20%, rgba(6,182,212,.16), transparent 60%),
        radial-gradient(1000px 650px at 70% 95%, rgba(34,197,94,.10), transparent 55%),
        linear-gradient(180deg, rgba(255,255,255,.92), rgba(255,255,255,.70));
      animation: bgFloat 18s var(--ease-out) infinite alternate;
      filter:saturate(1.05);
    }
    .dark .lab-bg{
      background:
        radial-gradient(1200px 700px at 15% 10%, rgba(124,58,237,.18), transparent 60%),
        radial-gradient(900px 560px at 85% 20%, rgba(6,182,212,.12), transparent 60%),
        radial-gradient(1000px 650px at 70% 95%, rgba(34,197,94,.08), transparent 55%),
        linear-gradient(180deg, rgba(6,9,18,1), rgba(6,9,18,.92));
    }
    @keyframes bgFloat{ from{transform:translateY(0)} to{transform:translateY(-14px)} }

    .lab-grid{
      position:fixed; inset:-2px; z-index:-4; pointer-events:none;
      background-image:
        linear-gradient(to right, rgba(148,163,184,.10) 1px, transparent 1px),
        linear-gradient(to bottom, rgba(148,163,184,.10) 1px, transparent 1px);
      background-size: 42px 42px;
      mask-image: radial-gradient(circle at 35% 20%, rgba(0,0,0,1), transparent 70%);
      opacity:.55;
    }
    .dark .lab-grid{ opacity:.35; }

    .grain{
      position:fixed; inset:0; z-index:-3; pointer-events:none;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='260' height='260'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='260' height='260' filter='url(%23n)' opacity='.25'/%3E%3C/svg%3E");
      mix-blend-mode: overlay;
      opacity:.10;
    }
    .dark .grain{ opacity:.08; }

    /* Progress bar */
    #scrollProgress{
      position:fixed; top:0; left:0; height:2px; width:0%;
      background: linear-gradient(90deg, rgba(124,58,237,.95), rgba(6,182,212,.85));
      z-index:60;
      box-shadow: 0 0 18px rgba(124,58,237,.30);
    }

    /* Navbar underline active */
    .nav-link{ position:relative; }
    .nav-link::after{
      content:""; position:absolute; left:0; bottom:-8px;
      height:2px; width:0%; border-radius:9999px;
      background: linear-gradient(90deg, rgba(124,58,237,.95), rgba(6,182,212,.85));
      transition: width 340ms var(--ease-out);
      opacity:.9;
    }
    .nav-link.is-active::after{ width:100%; }

    /* Reveal */
    .reveal-init{ opacity:0; transform: translateY(14px) scale(.99); filter: blur(8px); }
    .reveal-show{
      opacity:1; transform: translateY(0) scale(1); filter: blur(0);
      transition: transform 850ms var(--ease-spring), opacity 850ms var(--ease-out), filter 950ms var(--ease-out);
    }

    /* Glass card */
    .paper-card{
      border:1px solid rgba(148,163,184,.25);
      background: rgba(255,255,255,.70);
      backdrop-filter: blur(14px);
      box-shadow: 0 0 0 1px rgba(15,23,42,.04), 0 18px 55px -45px rgba(2,6,23,.35);
    }
    .dark .paper-card{
      border:1px solid rgba(148,163,184,.18);
      background: rgba(8,12,22,.62);
      box-shadow: 0 0 0 1px rgba(148,163,184,.06), 0 18px 55px -45px rgba(0,0,0,.85);
    }

    /* Glow tracking */
    .hover-glow{ position:relative; }
    .hover-glow::before{
      content:""; position:absolute; inset:-1px; border-radius:inherit;
      background: radial-gradient(420px circle at var(--mx,50%) var(--my,50%), rgba(124,58,237,.18), transparent 55%);
      opacity:0; transition: opacity 240ms var(--ease-out);
      pointer-events:none;
    }
    .hover-glow:hover::before{ opacity:1; }

    /* Magnetic + tilt */
    .tilt{ transform-style:preserve-3d; will-change:transform; }
    .magnetic{ will-change:transform; transition: transform 240ms var(--ease-out); }

    /* Buttons */
    .btn-primary{
      background: linear-gradient(135deg, rgba(124,58,237,1), rgba(6,182,212,.95));
      box-shadow: 0 16px 55px -35px rgba(124,58,237,.55);
    }
    .btn-primary:hover{ filter:brightness(1.02); transform: translateY(-2px); }
    .btn-ghost:hover{ box-shadow: 0 0 0 1px rgba(124,58,237,.18); }

    /* Typewriter caret */
    .caret{ display:inline-block; width:1ch; transform: translateY(1px); animation: blink 1s steps(2,end) infinite; opacity:.9; }
    @keyframes blink{ 50%{opacity:0} }

    /* Section divider */
    .section-line{
      height:1px; width:100%;
      background: linear-gradient(90deg, transparent, rgba(148,163,184,.55), transparent);
      opacity:.65;
      transform: scaleX(.92);
    }

    /* Chips */
    .chip{ border:1px solid rgba(148,163,184,.25); background: rgba(248,250,252,.7); }
    .dark .chip{ border:1px solid rgba(148,163,184,.18); background: rgba(15,23,42,.30); }

    /* Inputs focus ring */
    .focus-ring:focus{ outline:none; box-shadow: 0 0 0 4px rgba(124,58,237,.20); border-color: rgba(124,58,237,.75); }

    /* Back-to-top */
    #toTop{
      position: fixed; right: 18px; bottom: 18px;
      transform: translateY(12px); opacity:0; pointer-events:none;
      transition: opacity 260ms var(--ease-out), transform 260ms var(--ease-out);
      z-index:55;
    }
    #toTop.show{ opacity:1; transform: translateY(0); pointer-events:auto; }

    /* Modal */
    .modal-backdrop{
      position:fixed; inset:0; z-index:70;
      background: rgba(2,6,23,.55);
      backdrop-filter: blur(10px);
      display:none;
      align-items:center;
      justify-content:center;
      padding: 18px;
    }
    .modal-backdrop.show{ display:flex; }

    /* Form status line */
    #formStatus{ min-height: 18px; }
  </style>
</head>

<body class="text-slate-900 dark:text-slate-50 bg-[#f7f8fb] dark:bg-[#060912] transition-colors duration-300">

  <!-- Premium background -->
  <div class="lab-bg motion-safe-only"></div>
  <div class="lab-grid motion-safe-only"></div>
  <div class="grain motion-safe-only"></div>

  <!-- Scroll progress -->
  <div id="scrollProgress" class="motion-safe-only"></div>

  <!-- ================= NAVBAR ================= -->
  <header id="siteHeader"
    class="fixed top-0 inset-x-0 z-40 border-b border-slate-200/60 dark:border-slate-800/60 bg-white/55 dark:bg-[#060912]/70 backdrop-blur transition-all duration-300">
    <nav class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between">
      <!-- Brand -->
      <a href="#home" class="flex items-center gap-2">
        <span class="h-9 w-9 rounded-2xl bg-gradient-to-br from-violet-600 to-cyan-400 flex items-center justify-center text-sm font-semibold text-white shadow-soft">
          HL
        </span>
        <div class="flex flex-col leading-tight">
          <span class="text-sm font-semibold text-slate-900 dark:text-slate-50">Hamid Liaqat</span>
          <span class="text-[11px] text-slate-500 dark:text-slate-400">AI/ML Engineer</span>
        </div>
      </a>

      <!-- Desktop Nav -->
      <div class="hidden md:flex items-center gap-8">
        <a data-nav="home" href="#home" class="nav-link text-sm font-medium text-slate-600 dark:text-slate-300 hover:text-violet-600 dark:hover:text-cyan-300 transition-colors">Home</a>
        <a data-nav="about" href="#about" class="nav-link text-sm font-medium text-slate-600 dark:text-slate-300 hover:text-violet-600 dark:hover:text-cyan-300 transition-colors">About</a>
        <a data-nav="skills" href="#skills" class="nav-link text-sm font-medium text-slate-600 dark:text-slate-300 hover:text-violet-600 dark:hover:text-cyan-300 transition-colors">Skills</a>
        <a data-nav="projects" href="#projects" class="nav-link text-sm font-medium text-slate-600 dark:text-slate-300 hover:text-violet-600 dark:hover:text-cyan-300 transition-colors">Projects</a>
        <a data-nav="contact" href="#contact" class="nav-link text-sm font-medium text-slate-600 dark:text-slate-300 hover:text-violet-600 dark:hover:text-cyan-300 transition-colors">Contact</a>

        <button id="darkToggleDesktop" type="button"
          class="magnetic inline-flex items-center gap-1 rounded-full border border-slate-200/70 dark:border-slate-700/60 px-3 py-1 text-xs font-medium text-slate-700 dark:text-slate-200 hover:border-violet-500 hover:text-violet-700 dark:hover:text-cyan-300 transition-colors">
          <span id="darkIconDesktop">ðŸŒ™</span>
          <span>Theme</span>
        </button>
      </div>

      <!-- Mobile Controls -->
      <div class="flex items-center gap-2 md:hidden">
        <button id="darkToggleMobile" type="button" aria-label="Toggle dark mode"
          class="magnetic inline-flex items-center justify-center rounded-full border border-slate-200/70 dark:border-slate-700/60 p-1.5 text-xs text-slate-700 dark:text-slate-200 hover:border-violet-500 hover:text-violet-700 dark:hover:text-cyan-300 transition-colors">
          <span id="darkIconMobile">ðŸŒ™</span>
        </button>
        <button id="menuToggle" type="button"
          class="inline-flex items-center justify-center p-2 rounded-md text-slate-700 dark:text-slate-200 hover:bg-slate-100/60 dark:hover:bg-slate-800/50 focus:outline-none transition-transform duration-200 active:scale-95">
          <span class="sr-only">Toggle main menu</span>
          <svg class="h-5 w-5" viewBox="0 0 24 24" stroke="currentColor" fill="none">
            <path d="M4 6h16M4 12h16M4 18h16" stroke-width="2" stroke-linecap="round" />
          </svg>
        </button>
      </div>
    </nav>

    <!-- Mobile Menu -->
    <div id="mobileMenu" class="md:hidden hidden border-t border-slate-200/60 dark:border-slate-800/60 bg-white/70 dark:bg-[#060912]/80 backdrop-blur">
      <div class="max-w-6xl mx-auto px-4 py-3 space-y-1">
        <a data-nav="home" href="#home" class="nav-link block text-sm font-medium text-slate-600 dark:text-slate-300 hover:text-violet-600 dark:hover:text-cyan-300 py-1.5">Home</a>
        <a data-nav="about" href="#about" class="nav-link block text-sm font-medium text-slate-600 dark:text-slate-300 hover:text-violet-600 dark:hover:text-cyan-300 py-1.5">About</a>
        <a data-nav="skills" href="#skills" class="nav-link block text-sm font-medium text-slate-600 dark:text-slate-300 hover:text-violet-600 dark:hover:text-cyan-300 py-1.5">Skills</a>
        <a data-nav="projects" href="#projects" class="nav-link block text-sm font-medium text-slate-600 dark:text-slate-300 hover:text-violet-600 dark:hover:text-cyan-300 py-1.5">Projects</a>
        <a data-nav="contact" href="#contact" class="nav-link block text-sm font-medium text-slate-600 dark:text-slate-300 hover:text-violet-600 dark:hover:text-cyan-300 py-1.5">Contact</a>
      </div>
    </div>
  </header>

  <!-- ================= MAIN ================= -->
  <main class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 pt-24 pb-16 space-y-20 md:space-y-24">

    <!-- ... (your existing sections unchanged) ... -->

    <!-- ========== CONTACT ========== -->
    <section id="contact" class="space-y-6" data-section="contact">
      <div class="space-y-2" data-reveal>
        <p class="text-xs font-semibold tracking-[0.25em] uppercase text-slate-500 dark:text-slate-400">Contact</p>
        <h2 class="text-xl sm:text-2xl font-semibold text-slate-900 dark:text-slate-50">Let&apos;s connect</h2>
      </div>

      <div class="grid md:grid-cols-[0.9fr,1.1fr] gap-8 items-start">
        <!-- Contact Info (unchanged) -->
        <div class="space-y-4 text-sm sm:text-base text-slate-600 dark:text-slate-300" data-reveal>
          <p>For AI/ML projects, collaborations, or opportunities, you can reach me using the details below or the contact form.</p>
          <div class="space-y-3 text-sm">
            <div class="flex flex-col">
              <span class="text-[11px] uppercase tracking-wide text-slate-500 dark:text-slate-400 font-medium">Email</span>
              <a href="mailto:hamid.1liaqat@gmail.com" class="text-sm text-slate-800 dark:text-slate-100 hover:text-violet-700 dark:hover:text-cyan-300">
                hamid.1liaqat@gmail.com
              </a>
            </div>
            <div class="flex flex-col">
              <span class="text-[11px] uppercase tracking-wide text-slate-500 dark:text-slate-400 font-medium">Phone</span>
              <a href="tel:+923231524232" class="text-sm text-slate-800 dark:text-slate-100 hover:text-violet-700 dark:hover:text-cyan-300">
                +92 323 1524232
              </a>
            </div>
            <div class="flex flex-col">
              <span class="text-[11px] uppercase tracking-wide text-slate-500 dark:text-slate-400 font-medium">Location</span>
              <span class="text-sm text-slate-800 dark:text-slate-100">Lahore, Punjab, Pakistan</span>
            </div>
            <div class="flex flex-col">
              <span class="text-[11px] uppercase tracking-wide text-slate-500 dark:text-slate-400 font-medium">LinkedIn</span>
              <a href="https://www.linkedin.com/in/hamidliaqat/" target="_blank" rel="noreferrer"
                 class="text-sm text-slate-800 dark:text-slate-100 hover:text-violet-700 dark:hover:text-cyan-300">
                linkedin.com/in/hamidliaqat
              </a>
            </div>
            <div class="flex flex-col">
              <span class="text-[11px] uppercase tracking-wide text-slate-500 dark:text-slate-400 font-medium">GitHub</span>
              <a href="https://github.com/hafiz-enginer" target="_blank" rel="noreferrer"
                 class="text-sm text-slate-800 dark:text-slate-100 hover:text-violet-700 dark:hover:text-cyan-300">
                github.com/hafiz-enginer
              </a>
            </div>
          </div>
        </div>

        <!-- Contact Form (FormSubmit integrated) -->
        <div class="tilt hover-glow paper-card rounded-2xl p-5 sm:p-6" data-reveal>
          <form id="contactForm"
                action="https://formsubmit.co/hamid.1liaqat@gmail.com"
                method="POST"
                class="space-y-4">

            <!-- FormSubmit settings -->
            <input type="hidden" name="_subject" value="New Portfolio Contact Message" />
            <input type="hidden" name="_captcha" value="false" />
            <input type="hidden" name="_template" value="table" />
            <input type="hidden" name="_replyto" value="%email%" />

            <div class="grid sm:grid-cols-2 gap-4">
              <div class="space-y-1">
                <label for="name" class="text-xs font-medium text-slate-700 dark:text-slate-200">Name</label>
                <input id="name" name="name" type="text" required
                  class="focus-ring w-full rounded-lg border border-slate-200/70 dark:border-slate-700/60 bg-transparent px-3 py-2 text-sm text-slate-900 dark:text-slate-100"
                  placeholder="Your name" />
              </div>
              <div class="space-y-1">
                <label for="email" class="text-xs font-medium text-slate-700 dark:text-slate-200">Email</label>
                <input id="email" name="email" type="email" required
                  class="focus-ring w-full rounded-lg border border-slate-200/70 dark:border-slate-700/60 bg-transparent px-3 py-2 text-sm text-slate-900 dark:text-slate-100"
                  placeholder="you@example.com" />
              </div>
            </div>

            <div class="space-y-1">
              <label for="message" class="text-xs font-medium text-slate-700 dark:text-slate-200">Message</label>
              <textarea id="message" name="message" rows="4" required
                class="focus-ring w-full rounded-lg border border-slate-200/70 dark:border-slate-700/60 bg-transparent px-3 py-2 text-sm text-slate-900 dark:text-slate-100 resize-none"
                placeholder="Tell me a bit about your project or question..."></textarea>
            </div>

            <div class="flex items-center gap-3">
              <button id="sendBtn" type="submit"
                class="magnetic btn-primary inline-flex items-center justify-center rounded-full text-white px-5 py-2.5 text-sm font-semibold transition-transform duration-200 w-full sm:w-auto">
                Send Message
              </button>
              <p id="formStatus" class="text-[11px] text-slate-500 dark:text-slate-400 hidden"></p>
            </div>

            <p class="text-[11px] text-slate-500 dark:text-slate-400 mt-1">
              Messages are delivered to my Gmail inbox via FormSubmit.
            </p>
          </form>
        </div>
      </div>
    </section>
  </main>

  <!-- ================= FOOTER (unchanged) ================= -->
  <footer class="border-t border-slate-200/60 dark:border-slate-800/60 mt-4">
    <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex flex-col sm:flex-row gap-2 items-center justify-between text-[11px] sm:text-xs text-slate-500 dark:text-slate-400">
      <span>Â© <span id="yearSpan"></span> Hamid Liaqat. All rights reserved.</span>
      <span>AI/ML Engineer â€¢ Lahore, Punjab, Pakistan</span>
    </div>
  </footer>

  <!-- Back to top -->
  <button id="toTop" class="magnetic paper-card rounded-full px-3 py-2 text-xs font-semibold text-slate-700 dark:text-slate-200">
    â†‘ Top
  </button>

  <!-- Project Modal (unchanged) -->
  <div id="modal" class="modal-backdrop" aria-hidden="true">
    <div class="paper-card rounded-3xl max-w-xl w-full p-5 sm:p-6 relative">
      <button id="modalClose" class="magnetic absolute right-3 top-3 border border-slate-200/70 dark:border-slate-700/60 rounded-full px-3 py-1 text-xs font-semibold text-slate-700 dark:text-slate-200 hover:border-violet-500">
        Close âœ•
      </button>
      <p class="text-[11px] uppercase tracking-wider text-slate-500 dark:text-slate-400">Project Brief</p>
      <h3 id="modalTitle" class="mt-1 text-lg sm:text-xl font-semibold text-slate-900 dark:text-slate-50">â€”</h3>
      <p id="modalDesc" class="mt-2 text-sm text-slate-600 dark:text-slate-300">â€”</p>
      <div id="modalTags" class="mt-4 flex flex-wrap gap-2 text-[11px]"></div>
      <div class="mt-5 flex items-center gap-3">
        <a id="modalLink" href="#" target="_blank" rel="noreferrer"
           class="magnetic btn-primary inline-flex items-center justify-center rounded-full text-white px-4 py-2 text-sm font-semibold transition-transform duration-200">
          Open GitHub
        </a>
        <button id="modalCopy" class="magnetic btn-ghost inline-flex items-center justify-center rounded-full border border-slate-300/70 dark:border-slate-700/60 px-4 py-2 text-sm font-medium text-slate-800 dark:text-slate-100 hover:border-violet-500 hover:text-violet-700 dark:hover:text-cyan-300 transition-colors">
          Copy Link
        </button>
      </div>
      <p id="modalToast" class="mt-3 text-[11px] text-emerald-600 dark:text-emerald-400 hidden">Link copied âœ…</p>
    </div>
  </div>

  <!-- =============== JS (EmailJS removed; rest unchanged) =============== -->
  <script>
    const root = document.documentElement;
    const savedTheme = localStorage.getItem('theme');

    // Theme init (default dark)
    if (savedTheme === 'dark' || !savedTheme) root.classList.add('dark');
    else root.classList.remove('dark');

    const darkToggleDesktop = document.getElementById('darkToggleDesktop');
    const darkToggleMobile = document.getElementById('darkToggleMobile');
    const darkIconDesktop = document.getElementById('darkIconDesktop');
    const darkIconMobile = document.getElementById('darkIconMobile');

    function updateDarkIcons() {
      const isDark = root.classList.contains('dark');
      const icon = isDark ? 'â˜€ï¸' : 'ðŸŒ™';
      if (darkIconDesktop) darkIconDesktop.textContent = icon;
      if (darkIconMobile) darkIconMobile.textContent = icon;
    }
    function toggleDarkMode() {
      const isDark = root.classList.toggle('dark');
      localStorage.setItem('theme', isDark ? 'dark' : 'light');
      updateDarkIcons();
    }
    darkToggleDesktop && darkToggleDesktop.addEventListener('click', toggleDarkMode);
    darkToggleMobile && darkToggleMobile.addEventListener('click', toggleDarkMode);
    updateDarkIcons();

    // Mobile menu toggle
    const menuToggle = document.getElementById('menuToggle');
    const mobileMenu = document.getElementById('mobileMenu');
    if (menuToggle && mobileMenu) {
      menuToggle.addEventListener('click', () => mobileMenu.classList.toggle('hidden'));
      mobileMenu.querySelectorAll('a').forEach(link => link.addEventListener('click', () => mobileMenu.classList.add('hidden')));
    }

    // Footer year
    const yearSpan = document.getElementById('yearSpan');
    if (yearSpan) yearSpan.textContent = new Date().getFullYear();

    const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

    // Scroll progress + back-to-top
    const progress = document.getElementById('scrollProgress');
    const toTop = document.getElementById('toTop');

    function handleScroll() {
      const doc = document.documentElement;
      const scrollTop = doc.scrollTop || document.body.scrollTop;
      const scrollHeight = doc.scrollHeight - doc.clientHeight;
      const p = scrollHeight > 0 ? (scrollTop / scrollHeight) * 100 : 0;
      if (progress) progress.style.width = `${p}%`;

      if (toTop) {
        if (scrollTop > 600) toTop.classList.add('show');
        else toTop.classList.remove('show');
      }
    }
    window.addEventListener('scroll', handleScroll, { passive: true });
    handleScroll();

    toTop && toTop.addEventListener('click', () => window.scrollTo({ top: 0, behavior: 'smooth' }));

    // Navbar scrollspy
    const sections = document.querySelectorAll('[data-section]');
    const navLinks = document.querySelectorAll('.nav-link');

    function setActiveNav(id) {
      navLinks.forEach(link => {
        const target = link.getAttribute('data-nav');
        const active = target === id;
        link.classList.toggle('is-active', active);

        if (active) {
          link.classList.add('text-violet-700','dark:text-cyan-300');
          link.classList.remove('text-slate-600','dark:text-slate-300');
        } else {
          link.classList.add('text-slate-600','dark:text-slate-300');
          link.classList.remove('text-violet-700','dark:text-cyan-300');
        }
      });
    }

    const sectionObserver = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) setActiveNav(entry.target.getAttribute('data-section'));
      });
    }, { threshold: 0.42 });
    sections.forEach(section => sectionObserver.observe(section));

    // Reveal animation
    const revealEls = document.querySelectorAll('[data-reveal]');
    const revealObserver = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('reveal-show');
          entry.target.classList.remove('reveal-init');
          revealObserver.unobserve(entry.target);
        }
      });
    }, { threshold: 0.16 });

    revealEls.forEach((el, i) => {
      el.classList.add('reveal-init');
      if (!prefersReduced) el.style.transitionDelay = `${Math.min(i * 55, 260)}ms`;
      revealObserver.observe(el);
    });

    // Glow pointer tracking
    function attachGlow(el) {
      el.addEventListener('pointermove', (e) => {
        const r = el.getBoundingClientRect();
        const x = ((e.clientX - r.left) / r.width) * 100;
        const y = ((e.clientY - r.top) / r.height) * 100;
        el.style.setProperty('--mx', `${x}%`);
        el.style.setProperty('--my', `${y}%`);
      });
    }
    document.querySelectorAll('.hover-glow').forEach(attachGlow);

    // Magnetic effect
    function attachMagnetic(el, strength = 8) {
      if (prefersReduced) return;
      const reset = () => el.style.transform = 'translate3d(0,0,0)';
      el.addEventListener('pointermove', (e) => {
        const r = el.getBoundingClientRect();
        const x = (e.clientX - (r.left + r.width / 2)) / (r.width / 2);
        const y = (e.clientY - (r.top + r.height / 2)) / (r.height / 2);
        el.style.transform = `translate3d(${x * strength}px, ${y * strength}px, 0)`;
      });
      el.addEventListener('pointerleave', reset);
      el.addEventListener('blur', reset);
    }
    document.querySelectorAll('.magnetic').forEach(btn => attachMagnetic(btn, 8));

    // Tilt effect
    function attachTilt(card, maxTilt = 7) {
      if (prefersReduced) return;
      let raf = 0;
      const onMove = (e) => {
        cancelAnimationFrame(raf);
        raf = requestAnimationFrame(() => {
          const r = card.getBoundingClientRect();
          const px = (e.clientX - r.left) / r.width;
          const py = (e.clientY - r.top) / r.height;
          const rotY = (px - 0.5) * (maxTilt * 2);
          const rotX = (0.5 - py) * (maxTilt * 2);
          card.style.transform = `perspective(900px) rotateX(${rotX}deg) rotateY(${rotY}deg) translateY(-2px)`;
        });
      };
      const reset = () => { cancelAnimationFrame(raf); card.style.transform = 'perspective(900px) rotateX(0deg) rotateY(0deg) translateY(0px)'; };
      card.addEventListener('pointermove', onMove);
      card.addEventListener('pointerleave', reset);
      card.addEventListener('blur', reset);
    }
    document.querySelectorAll('.tilt').forEach(el => attachTilt(el, 7));

    // Typewriter (professional & subtle)
    const typeTarget = document.getElementById('typeTarget');
    const roles = [
      'rigorous AI systems with measurable results.',
      'ML pipelines that ship to production.',
      'computer vision + NLP applications.',
      'RAG + agent workflows (practical).',
      'ethical AI with real-world impact.'
    ];
    async function typewriterLoop() {
      if (!typeTarget || prefersReduced) {
        if (typeTarget) typeTarget.textContent = 'rigorous AI systems with measurable results.';
        return;
      }
      const sleep = (ms) => new Promise(r => setTimeout(r, ms));
      let i = 0;
      while (true) {
        const word = roles[i % roles.length];
        typeTarget.textContent = ' ';
        for (let c = 0; c < word.length; c++) { typeTarget.textContent = ' ' + word.slice(0, c+1); await sleep(22 + Math.random() * 14); }
        await sleep(900);
        for (let c = word.length; c >= 0; c--) { typeTarget.textContent = ' ' + word.slice(0, c); await sleep(16 + Math.random() * 10); }
        await sleep(220);
        i++;
      }
    }
    typewriterLoop();

    // OPTIONAL: show a small status while submitting (without breaking form)
    const contactForm = document.getElementById('contactForm');
    const formStatus = document.getElementById('formStatus');
    const sendBtn = document.getElementById('sendBtn');

    function showStatus(text, ok = true) {
      if (!formStatus) return;
      formStatus.classList.remove('hidden', 'text-emerald-600', 'text-rose-600');
      formStatus.classList.add(ok ? 'text-emerald-600' : 'text-rose-600');
      formStatus.textContent = text;
    }

    if (contactForm) {
      contactForm.addEventListener('submit', () => {
        // FormSubmit will redirect by default, but this helps give instant feedback
        if (sendBtn) {
          sendBtn.disabled = true;
          sendBtn.classList.add('opacity-70','cursor-not-allowed');
          sendBtn.textContent = "Sending...";
        }
        showStatus("â³ Sending...", true);
      });
    }

    // Project Quick View Modal (unchanged)
    const modal = document.getElementById('modal');
    const modalTitle = document.getElementById('modalTitle');
    const modalDesc = document.getElementById('modalDesc');
    const modalTags = document.getElementById('modalTags');
    const modalLink = document.getElementById('modalLink');
    const modalClose = document.getElementById('modalClose');
    const modalCopy = document.getElementById('modalCopy');
    const modalToast = document.getElementById('modalToast');

    function openModal(card){
      if (!modal) return;
      const title = card.getAttribute('data-title') || 'Project';
      const desc = card.getAttribute('data-desc') || '';
      const tags = (card.getAttribute('data-tags') || '').split(',').map(s => s.trim()).filter(Boolean);
      const link = card.getAttribute('data-link') || '#';

      modalTitle.textContent = title;
      modalDesc.textContent = desc;
      modalLink.href = link;

      modalTags.innerHTML = '';
      tags.forEach(t => {
        const span = document.createElement('span');
        span.className = 'chip inline-flex items-center rounded-full px-2.5 py-0.5 font-medium text-slate-700 dark:text-slate-200';
        span.textContent = t;
        modalTags.appendChild(span);
      });

      modal.classList.add('show');
      modal.setAttribute('aria-hidden','false');
      document.body.style.overflow = 'hidden';
      modalToast.classList.add('hidden');

      setTimeout(() => modalClose && modalClose.focus(), 50);
    }
    function closeModal(){
      if (!modal) return;
      modal.classList.remove('show');
      modal.setAttribute('aria-hidden','true');
      document.body.style.overflow = '';
    }

    document.querySelectorAll('[data-quickview]').forEach(btn => {
      btn.addEventListener('click', (e) => {
        const card = e.target.closest('article');
        if (card) openModal(card);
      });
    });

    modal && modal.addEventListener('click', (e) => {
      if (e.target === modal) closeModal();
    });
    modalClose && modalClose.addEventListener('click', closeModal);

    window.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && modal && modal.classList.contains('show')) closeModal();
    });

    modalCopy && modalCopy.addEventListener('click', async () => {
      try{
        await navigator.clipboard.writeText(modalLink.href);
        modalToast.classList.remove('hidden');
        setTimeout(() => modalToast.classList.add('hidden'), 1200);
      } catch {
        alert('Copy failed. You can manually copy the link from the button.');
      }
    });
  </script>
</body>
</html>
